digital-wallet-api/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                     # DocumentaÃ§Ã£o principal para desenvolvedores
â”œâ”€â”€ ğŸ“„ composer.json                 # DependÃªncias PHP
â”œâ”€â”€ ğŸ“„ phpunit.xml                   # ConfiguraÃ§Ã£o de testes
â”œâ”€â”€ ğŸ“„ .env.example                  # Template de variÃ¡veis de ambiente
â”‚
â”œâ”€â”€ ğŸ³ Docker
â”‚   â”œâ”€â”€ docker-compose.yml           # Container de desenvolvimento
â”‚   â”œâ”€â”€ docker-compose.test.yml      # Container de testes (com Xdebug)
â”‚   â”œâ”€â”€ Dockerfile.test              # Imagem de testes
â”‚   â”œâ”€â”€ test-coverage.sh             # Script completo (build + testes)
â”‚   â””â”€â”€ test-run.sh                  # Script rÃ¡pido (apenas testes)
â”‚
â”œâ”€â”€ ğŸ“š docs/
â”‚   â””â”€â”€ TESTING.md                   # DocumentaÃ§Ã£o detalhada de testes
â”‚
â”œâ”€â”€ ğŸ“¦ examples/
â”‚   â”œâ”€â”€ README.md                    # Guia dos exemplos
â”‚   â”œâ”€â”€ api-usage.sh                 # Script de teste automÃ¡tico da API
â”‚   â”œâ”€â”€ Digital-Wallet-API.postman_collection.json # Collection Postman
â”‚   â””â”€â”€ sqlite-queries.sql           # Queries SQL Ãºteis
â”‚
â”œâ”€â”€ ğŸ¨ app/
â”‚   â”œâ”€â”€ Exceptions/                  # ExceÃ§Ãµes customizadas
â”‚   â”‚   â”œâ”€â”€ InsufficientBalanceException.php
â”‚   â”‚   â”œâ”€â”€ DailyLimitExceededException.php
â”‚   â”‚   â”œâ”€â”€ InvalidAccountException.php
â”‚   â”‚   â””â”€â”€ InvalidTransferException.php
â”‚   â”‚
â”‚   â”œâ”€â”€ Http/
â”‚   â”‚   â”œâ”€â”€ Controllers/Api/
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthController.php   # AutenticaÃ§Ã£o (register, login, logout)
â”‚   â”‚   â”‚   â””â”€â”€ WalletController.php # OperaÃ§Ãµes da carteira
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Middleware/
â”‚   â”‚   â”‚   â””â”€â”€ JwtMiddleware.php    # AutenticaÃ§Ã£o JWT
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Requests/                # ValidaÃ§Ã£o de requests
â”‚   â”‚   â”‚   â”œâ”€â”€ RegisterRequest.php
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginRequest.php
â”‚   â”‚   â”‚   â”œâ”€â”€ DepositRequest.php
â”‚   â”‚   â”‚   â”œâ”€â”€ WithdrawRequest.php
â”‚   â”‚   â”‚   â”œâ”€â”€ TransferRequest.php
â”‚   â”‚   â”‚   â””â”€â”€ StatementRequest.php
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Resources/               # SerializaÃ§Ã£o de respostas
â”‚   â”‚       â”œâ”€â”€ UserResource.php
â”‚   â”‚       â”œâ”€â”€ BalanceResource.php
â”‚   â”‚       â”œâ”€â”€ TransactionResource.php
â”‚   â”‚       â””â”€â”€ TransferResource.php
â”‚   â”‚
â”‚   â””â”€â”€ Models/                      # Models Eloquent
â”‚       â”œâ”€â”€ User.php
â”‚       â”œâ”€â”€ Account.php
â”‚       â”œâ”€â”€ Balance.php
â”‚       â”œâ”€â”€ Transaction.php
â”‚       â”œâ”€â”€ TransactionType.php
â”‚       â”œâ”€â”€ Transfer.php
â”‚       â””â”€â”€ DailyLimit.php
â”‚
â”œâ”€â”€ ğŸ—„ï¸ database/
â”‚   â”œâ”€â”€ database.sqlite              # Banco de dados principal
â”‚   â”œâ”€â”€ testing.sqlite               # Banco de dados de testes
â”‚   â”‚
â”‚   â”œâ”€â”€ migrations/                  # Migrations
â”‚   â”‚   â”œâ”€â”€ create_users_table.php
â”‚   â”‚   â”œâ”€â”€ create_accounts_table.php
â”‚   â”‚   â”œâ”€â”€ create_balances_table.php
â”‚   â”‚   â”œâ”€â”€ create_transactions_table.php
â”‚   â”‚   â”œâ”€â”€ create_transfers_table.php
â”‚   â”‚   â””â”€â”€ create_daily_limits_table.php
â”‚   â”‚
â”‚   â”œâ”€â”€ seeders/                     # Seeders
â”‚   â”‚   â”œâ”€â”€ TransactionTypeSeeder.php
â”‚   â”‚   â””â”€â”€ InitialAccountSeeder.php
â”‚   â”‚
â”‚   â””â”€â”€ factories/                   # Factories para testes
â”‚       â””â”€â”€ UserFactory.php
â”‚
â”œâ”€â”€ ğŸ›£ï¸ routes/
â”‚   â””â”€â”€ api.php                      # Rotas da API
â”‚
â”œâ”€â”€ ğŸ§ª tests/
â”‚   â”œâ”€â”€ Feature/                     # Testes de integraÃ§Ã£o (77 testes)
â”‚   â”‚   â”œâ”€â”€ AuthenticationTest.php   # 12 testes
â”‚   â”‚   â”œâ”€â”€ ExceptionHandlingTest.php # 14 testes
â”‚   â”‚   â”œâ”€â”€ TransactionDetailTest.php # 7 testes
â”‚   â”‚   â”œâ”€â”€ WalletBalanceTest.php    # 6 testes
â”‚   â”‚   â”œâ”€â”€ WalletDepositTest.php    # 10 testes
â”‚   â”‚   â”œâ”€â”€ WalletTransferTest.php   # 14 testes
â”‚   â”‚   â””â”€â”€ WalletWithdrawTest.php   # 12 testes
â”‚   â”‚
â”‚   â””â”€â”€ Unit/                        # Testes unitÃ¡rios
â”‚       â””â”€â”€ ExampleTest.php
â”‚
â”œâ”€â”€ ğŸ“Š coverage/                     # RelatÃ³rios de cobertura (gerado)
â”‚   â””â”€â”€ index.html                   # RelatÃ³rio HTML
â”‚
â””â”€â”€ ğŸ”§ config/                       # ConfiguraÃ§Ãµes Laravel
    â”œâ”€â”€ auth.php
    â”œâ”€â”€ database.php
    â””â”€â”€ jwt.php

ENDPOINTS DA API:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“ AutenticaÃ§Ã£o (PÃºblicas)
  POST   /api/auth/register         # Registrar usuÃ¡rio
  POST   /api/auth/login            # Login

ğŸ“ AutenticaÃ§Ã£o (Protegidas - JWT)
  POST   /api/auth/logout           # Logout
  POST   /api/auth/refresh          # Refresh token
  GET    /api/auth/me               # Dados do usuÃ¡rio autenticado

ğŸ“ Carteira (Protegidas - JWT)
  GET    /api/wallet/balance        # Consultar saldo
  POST   /api/wallet/deposit        # Depositar
  POST   /api/wallet/withdraw       # Sacar
  POST   /api/wallet/transfer       # Transferir
  POST   /api/wallet/chargeback     # Estornar
  POST   /api/wallet/contestar      # Contestar
  GET    /api/wallet/transaction/{id} # Detalhes da transaÃ§Ã£o
  GET    /api/wallet/statement      # Extrato

BANCO DE DADOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“Š Principais Tabelas:
  â€¢ users              - UsuÃ¡rios do sistema
  â€¢ accounts           - Contas bancÃ¡rias
  â€¢ balances           - Saldos das contas
  â€¢ transactions       - Todas as transaÃ§Ãµes
  â€¢ transaction_types  - Tipos de transaÃ§Ã£o (DEPOSIT, WITHDRAW, etc.)
  â€¢ transfers          - Registro de transferÃªncias
  â€¢ daily_limits       - Limites diÃ¡rios por operaÃ§Ã£o

COMANDOS ÃšTEIS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸš€ Docker:
  docker compose up -d                    # Iniciar
  docker compose logs -f                  # Ver logs
  docker compose exec app sh              # Entrar no container
  docker compose down                     # Parar

ğŸ§ª Testes:
  ./test-coverage.sh                      # Testes com coverage (Docker)
  ./test-run.sh                           # Testes rÃ¡pidos (Docker)
  php artisan test                        # Testes locais
  php artisan test --coverage-html coverage # Coverage local

ğŸ—„ï¸ SQLite:
  sqlite3 database/database.sqlite        # Abrir banco
  sqlite3 database/database.sqlite < examples/sqlite-queries.sql # Executar queries

ğŸ“¦ Laravel:
  php artisan migrate                     # Rodar migrations
  php artisan migrate:fresh --seed        # Resetar banco
  php artisan cache:clear                 # Limpar cache
  php artisan route:list                  # Listar rotas
  php artisan l5-swagger:generate         # Gerar Swagger

RECURSOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… 77 testes automatizados (100% passando)
âœ… 295 assertions
âœ… Cobertura de cÃ³digo com Xdebug
âœ… Docker configurado para dev e testes
âœ… AutenticaÃ§Ã£o JWT
âœ… Limites diÃ¡rios por operaÃ§Ã£o
âœ… Sistema de estorno e contestaÃ§Ã£o
âœ… Extrato com consolidaÃ§Ã£o diÃ¡ria
âœ… DocumentaÃ§Ã£o Swagger/OpenAPI
âœ… Postman Collection
âœ… Scripts de exemplo
âœ… Queries SQL prontas

LIMITES PADRÃƒO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ’° DepÃ³sito:      R$ 10.000,00/dia
ğŸ’¸ Saque:         R$  5.000,00/dia
ğŸ”„ TransferÃªncia: R$  5.000,00/dia
